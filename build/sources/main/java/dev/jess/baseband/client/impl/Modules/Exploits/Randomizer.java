package dev.jess.baseband.client.impl.Modules.Exploits;

import dev.jess.baseband.client.api.Main.BaseBand;
import dev.jess.baseband.client.api.Module.Category;
import dev.jess.baseband.client.api.Module.Module;
import dev.jess.baseband.client.api.Settings.Setting;
import dev.jess.baseband.client.api.Utils.ChatUtil;
import dev.jess.baseband.client.api.Utils.Wrapper;
import net.minecraft.util.math.BlockPos;
import net.minecraft.util.math.ChunkPos;

import java.awt.*;

public class Randomizer extends Module {
	public Setting bedrock = new Setting("Bedrock", this, true);

	public Randomizer() {
		super("Randomizer", "Prevent coord exploit screwery", Category.EXPLOITS, new Color(232, 22, 242, 255).getRGB());
		BaseBand.settingsManager.rSetting(bedrock);
	}


	public void enable() {
		ChatUtil.sendChatMsg("Warning! This module may cause Desync!");
	}

	public void tick() {
		for (ChunkPos vis : Wrapper.getMinecraft().world.visibleChunks) {
			int xstart = vis.getXStart();
			int zstart = vis.getXStart();
			int xend = vis.getXEnd();
			int zend = vis.getXEnd();


			for (int x = xstart; x <= xend; x++) {
				for (int z = zstart; z <= zend; z++) {
					for (int y = 0; y <= 7; y++) {
						if (bedrock.getValBoolean()) {
							BlockPos clear = new BlockPos(x, y, z);

							if (! Wrapper.getMinecraft().player.world.isBlockLoaded(clear)) {
								continue;
							}
							Wrapper.getMinecraft().world.setBlockToAir(clear);
						}
					}
				}
			}
		}
	}


}
