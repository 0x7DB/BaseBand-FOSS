package dev.jess.baseband.client.impl.Modules.Exploits;

import dev.jess.baseband.client.api.Module.Category;
import dev.jess.baseband.client.api.Module.Module;
import io.netty.buffer.Unpooled;
import net.minecraft.network.Packet;
import net.minecraft.network.PacketBuffer;
import net.minecraft.network.play.client.CPacketCustomPayload;
import net.minecraftforge.fml.common.network.internal.FMLProxyPacket;

import java.awt.*;

public class AntiNoForge extends Module {
	public AntiNoForge() {
		super("AntiNoForge", "ez bypass?", Category.EXPLOITS, new Color(200, 4, 100).getRGB());
	}


	public boolean onPacketSend(Packet<?> packet) {
		if (packet instanceof FMLProxyPacket && ! mc.isSingleplayer()) {
			return true;
		}
		if (! mc.isIntegratedServerRunning()) {
			if (packet.getClass().getName().equals("net.minecraftforge.fml.common.network.internal.FMLProxyPacket"))
				return true;
			else if (packet instanceof CPacketCustomPayload)
				if (((CPacketCustomPayload) packet).getChannelName().equalsIgnoreCase("MC|Brand"))
					((CPacketCustomPayload) packet).data = (new PacketBuffer(Unpooled.buffer()).writeString("vanilla"));
		}
		return false;
	}
}
