package dev.jess.baseband.client.impl.Modules.Exploits;

import dev.jess.baseband.client.api.Module.Category;
import dev.jess.baseband.client.api.Module.Module;
import dev.jess.baseband.client.api.Utils.ChatUtil;
import net.minecraft.network.Packet;
import net.minecraft.network.play.server.SPacketBlockChange;
import net.minecraft.util.math.Vec3d;

import java.awt.*;
import java.text.DecimalFormat;

public class NocomMaster extends Module {


	public NocomMaster() {
		super("NoCom-Master", "Block Game Radar Listener", Category.EXPLOITS, new Color(5, 255, 182, 255).getRGB());
	}


	public boolean onPacketReceive(Packet<?> packet) {
		if (packet.getClass() == SPacketBlockChange.class) {
			if (mc.world.isBlockLoaded(((SPacketBlockChange) packet).getBlockPosition(), false)) {
				return false;
			}
			SPacketBlockChange packetIn = (SPacketBlockChange) packet;
			DecimalFormat df = new DecimalFormat("#.#");
			Vec3d pos1 = new Vec3d(mc.player.getPosition().getX(), packetIn.getBlockPosition().getY(), mc.player.getPosition().getZ());
			ChatUtil.sendChatMsg("[NoCom]: " + packetIn.getBlockPosition() + " -> " + packetIn.getBlockState().getBlock().getLocalizedName() + " (" + df.format(pos1.distanceTo(new Vec3d(packetIn.getBlockPosition()))) + ") " + (mc.player.dimension == - 1 ? "Nether" : ""));
		}
		return false;
	}

}
