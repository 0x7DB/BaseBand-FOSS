package dev.jess.baseband.client.impl.Modules.Exploits;

import dev.jess.baseband.client.api.Main.BaseBand;
import dev.jess.baseband.client.api.Module.Category;
import dev.jess.baseband.client.api.Module.Module;
import dev.jess.baseband.client.api.Settings.Setting;
import dev.jess.baseband.client.api.Utils.SecondCounter;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketPlayer;

import java.awt.*;

public class LiveOverFlowDisabler extends Module {

	public Setting ExtraCalc = new Setting("ExtraCalc", this, false);
	SecondCounter spoofcount = new SecondCounter();


	public LiveOverFlowDisabler() {
		super("LOFDisabler", "Bot movement", Category.EXPLOITS, new Color(152, 154, 196, 255).getRGB());
		BaseBand.settingsManager.rSetting(ExtraCalc);
	}

	public void tick() {
		this.setMcHudMeta("" + spoofcount.getCount());
	}


	public boolean onPacketSend(Packet<?> packet) {
		if (packet instanceof CPacketPlayer) {
			CPacketPlayer packet2 = (CPacketPlayer) packet;
			packet2.x = packet2.x - (((long) (packet2.x * 1000)) % 10) * 0.001d + (ExtraCalc.getValBoolean() ? (Math.abs(packet2.x) / packet2.x) * 0.00005d : + 0);
			packet2.z = packet2.z - (((long) (packet2.z * 1000)) % 10) * 0.001d + (ExtraCalc.getValBoolean() ? (Math.abs(packet2.z) / packet2.z) * 0.00005d : + 0);
			spoofcount.increment();
		}
		return false;
	}

}
